<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:WateryTart.Core.ViewModels"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="WateryTart.Core.Views.LoginView"
             x:DataType="vm:LoginViewModel">
  <UserControl.Resources>
    <SolidColorBrush x:Key="ErrorBrush">#FFE81123</SolidColorBrush>
    <SolidColorBrush x:Key="SuccessBrush">#107C10</SolidColorBrush>
  </UserControl.Resources>

  <Grid VerticalAlignment="Top" HorizontalAlignment="Center">
    <StackPanel Width="350" Spacing="16">
      <!-- Header -->
      <TextBlock FontSize="32" FontWeight="Bold">
        Login
      </TextBlock>

      <!-- Error Message Display -->
      <Border Background="#FFF7CCCF" 
              BorderBrush="#FFE81123" 
              BorderThickness="1" 
              CornerRadius="4"
              IsVisible="{Binding HasError}"
              Padding="12">
        <StackPanel Spacing="4">
          <TextBlock FontWeight="Bold" Foreground="#E81123" FontSize="12">
            Error
          </TextBlock>
          <TextBlock Text="{Binding ErrorMessage}" 
                     Foreground="#E81123" 
                     TextWrapping="Wrap"
                     FontSize="12" />
        </StackPanel>
      </Border>

      <!-- Loading/Success Message Display -->
      <Border Background="#F7FFF7" 
              BorderBrush="#107C10" 
              BorderThickness="1" 
              CornerRadius="4"
              IsVisible="{Binding IsLoading}"
              Padding="12">
        <TextBlock Text="Logging in..." 
                   Foreground="#107C10" 
                   FontSize="12" />
      </Border>

      <!-- Server Input -->
      <StackPanel Spacing="4">
        <Label Content="Server" FontWeight="SemiBold" />
        <TextBox Height="36" 
                 TextWrapping="Wrap" 
                 Text="{Binding Server}" 
                 Watermark="my_server_ip:8095"
                 IsEnabled="{Binding !IsLoading}" />
      </StackPanel>

      <!-- Username Input -->
      <StackPanel Spacing="4">
        <Label Content="Username" FontWeight="SemiBold" />
        <TextBox Height="36" 
                 TextWrapping="Wrap" 
                 Text="{Binding Username}" 
                 Watermark="Username"
                 IsEnabled="{Binding !IsLoading}" />
      </StackPanel>

      <!-- Password Input -->
      <StackPanel Spacing="4">
        <Label Content="Password" FontWeight="SemiBold" />
        <TextBox PasswordChar="*" 
                 Watermark="Password" 
                 Height="36" 
                 TextWrapping="Wrap" 
                 Text="{Binding Password}"
                 IsEnabled="{Binding !IsLoading}" />
      </StackPanel>

      <!-- Sign In Button -->
      <Button Command="{Binding LoginCommand}" 
              Height="40"
              FontSize="14"
              FontWeight="SemiBold"
              IsEnabled="{Binding !IsLoading}">
        <StackPanel Orientation="Horizontal" Spacing="8" HorizontalAlignment="Center">
          <TextBlock Text="Sign In" VerticalAlignment="Center" />
        </StackPanel>
      </Button>
    </StackPanel>
  </Grid>
</UserControl>