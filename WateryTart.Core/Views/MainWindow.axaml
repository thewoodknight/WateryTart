<Window xmlns="https://github.com/avaloniaui"
		xmlns:app="using:WateryTart"
		xmlns:asyncImageLoader="using:AsyncImageLoader"
		xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
		xmlns:materialIcons="using:Material.Icons.Avalonia"
		xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:avalonia="http://reactiveui.net"
		xmlns:wateryTart="clr-namespace:WateryTart"
		xmlns:vm="clr-namespace:WateryTart.Core.ViewModels"
		xmlns:converters="clr-namespace:WateryTart.Core.Converters"
		xmlns:players1="clr-namespace:WateryTart.Core.Views.Players"
		xmlns:core="clr-namespace:WateryTart.Core"
		mc:Ignorable="d" d:DesignWidth="500" d:DesignHeight="450"
		ExtendClientAreaChromeHints="NoChrome"
		ExtendClientAreaToDecorationsHint="True"
		x:Class="WateryTart.Core.Views.MainWindow"
		Padding="0"
		Width="800"
		Height="480"
		x:Name="window"
		x:DataType="vm:MainWindowViewModel"
		Title="Watery Tart">

	<Window.Resources>
		<converters:MetadataImageConverter x:Key="MetadataImageConverter" />
		<x:Double x:Key="ControlContentThemeFontSize">16</x:Double>
		<converters:ToUpperValueConverter x:Key="ToUpperValueConverter" />
		<converters:PlaybackStateToVisibilityConverter x:Key="PlaybackStateToVisibilityConverter" />
	</Window.Resources>

	<Window.Background>
		<RadialGradientBrush Center="50%, 50%" GradientOrigin="100%, -15%" RadiusX="125%" RadiusY="125%"  >
			<GradientStop Color="{Binding ColourService.ColourA}" Offset="0.142"/>
			<GradientStop Color="{Binding ColourService.ColourB}" Offset="1"/>
		</RadialGradientBrush>
	</Window.Background>

	<Grid x:Name="grd" Background="{x:Null}" Margin="0">
		<Grid.RowDefinitions>
			<RowDefinition Height="50" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
		</Grid.RowDefinitions>

		<!-- Top Navigation -->
		<Grid Background="{x:Null}" Grid.Row="0" Margin="15,10,10,0">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="50" />
				<ColumnDefinition Width="*" />
			</Grid.ColumnDefinitions>
			<Button Grid.Column="0"  Classes="iconButton" Command="{Binding GoBack}">
				<materialIcons:MaterialIcon Kind="ArrowBack" Width="25" Height="25" />
			</Button>
			<TextBlock Grid.Column="1" Text="{Binding Title, Converter={StaticResource ToUpperValueConverter}}" TextTrimming="CharacterEllipsis" FontWeight="Bold" FontSize="18"/>
		</Grid>

		<!-- Content -->
		<ScrollViewer x:Name="sv"  Background="Transparent" Grid.Row="1" Margin="10,0,10,0">
			<ScrollViewer.GestureRecognizers>
				    <ScrollGestureRecognizer  CanVerticallyScroll="True"/>
			</ScrollViewer.GestureRecognizers>
			<avalonia:RoutedViewHost x:Name="Router" Router="{Binding Router}" Background="Transparent">
				<avalonia:RoutedViewHost.ViewLocator>
					<core:AppViewLocator />
				</avalonia:RoutedViewHost.ViewLocator>
			</avalonia:RoutedViewHost>
		</ScrollViewer>

		<StackPanel Grid.Row="2">
			<!-- Player Nav -->
			<players1:MiniPlayerView DataContext="{Binding MiniPlayer}" IsVisible="{Binding #window.((vm:MainWindowViewModel)DataContext).CurrentViewModel.ShowMiniPlayer}" />

			<!-- Bottom Nav -->
			<Grid Background="#66000000" IsVisible="{Binding  #window.((vm:MainWindowViewModel)DataContext).CurrentViewModel.ShowNavigation}">
				<Grid Margin="10,0,0,0">
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="*" />
						<ColumnDefinition Width="*" />
					</Grid.ColumnDefinitions>
					<Button Grid.Column="0"  Height="45" Classes="iconButton navButton" Command="{Binding GoHome}"><materialIcons:MaterialIcon Kind="Home"			Width="25" Height="25" /></Button>
					<Button Grid.Column="1"  Height="45" Classes="iconButton navButton" Command="{Binding GoMusic}"    ><materialIcons:MaterialIcon Kind="Music"    Width="25" Height="25" /></Button>
					<Button Grid.Column="2"  Height="45" Classes="iconButton navButton" Command="{Binding GoSearch}"   ><materialIcons:MaterialIcon Kind="Search"   Width="25" Height="25" /></Button>
					<Button Grid.Column="3"  Height="45" Classes="iconButton navButton" Command="{Binding GoPlayers}"  ><materialIcons:MaterialIcon Kind="Speaker"  Width="25" Height="25" /></Button>
					<Button Grid.Column="4"  Height="45" Classes="iconButton navButton" Command="{Binding GoSettings}" ><materialIcons:MaterialIcon Kind="Settings" Width="25" Height="25" /></Button>
				</Grid>
			</Grid>
		</StackPanel>

		<Grid IsVisible="{Binding ShowSlideupMenu}" Grid.Row="0" Grid.RowSpan="3" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Background="#72000000">
			<Interaction.Behaviors>
				<EventTriggerBehavior EventName="Tapped">
					<InvokeCommandAction
					Command="{Binding CloseSlideupCommand}"/>
				</EventTriggerBehavior>
			</Interaction.Behaviors>

		</Grid>
		<Grid
		x:Name="gridSlideup"
		Grid.Row="0"
		Background="#CC000000"
		Grid.RowSpan="3"
		VerticalAlignment="Bottom"
		MaxHeight="500"
		Classes.show="{Binding ShowSlideupMenu}"
		Classes.hide="{Binding !ShowSlideupMenu}">
<!--
			<Grid.Transitions>
				<Transitions>
					<DoubleTransition Property="Opacity" Duration="0:0:.2" Easing="SineEaseInOut"/>
					<TransformOperationsTransition Property="RenderTransform"
												   Easing="SineEaseInOut"
												   Duration="0:0:.2" />
				</Transitions>
			</Grid.Transitions>-->
			<Grid.Styles>
				<Style Selector="Grid.show">
					<Setter Property="IsVisible" Value="True" />
					<Setter Property="ZIndex" Value="1" />
					<Setter Property="RenderTransform" Value="translateY(0px)" />
				</Style>
				<Style Selector="Grid.hide">
					<Setter Property="IsVisible" Value="False" />
					<Setter Property="RenderTransform" Value="translateY(175px)" />
				</Style>
			</Grid.Styles>

			<ScrollViewer>
				<ContentControl Content="{Binding SlideupMenu}" Margin="20" />
			</ScrollViewer>
		</Grid>
	</Grid>
</Window>
